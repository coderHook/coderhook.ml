<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.26" />
  <meta name="author" content="Pedro Abel Diaz">
  <meta name="description" content="Self-taugh Full Stack Web Developer &amp; Data Scientist">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather%7CRoboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  

  

  <link rel="alternate" href="https://coderhook-ml.firebaseapp.com/index.xml" type="application/rss+xml" title="coderHook">
  <link rel="feed" href="https://coderhook-ml.firebaseapp.com/index.xml" type="application/rss+xml" title="coderHook">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="https://coderhook-ml.firebaseapp.com/project/board_games_reviews_predictions/">

  

  <title>Predicting Board Games Reviews, Custers, Correlations and choosing an Error.  | coderHook</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">coderHook</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
          </a>
        </li>

        
        

        
      </ul>

    </div>
  </div>
</nav>


<article class="article article-project" itemscope itemtype="http://schema.org/Article">

  
<div class="article-header">
  <img src="/img/headers/boardgames.jpg" class="article-banner" itemprop="image">
  <span class="article-header-caption">Which ones get the highest reviews?</span>
</div>



  <div class="article-container">

    <div class="pub-title">
      <h1 itemprop="name">Predicting Board Games Reviews, Custers, Correlations and choosing an Error. </h1>
      <span class="pub-authors" itemprop="author">&nbsp;</span>
      <span class="pull-right">
        
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fcoderhook-ml.firebaseapp.com%2fproject%2fboard_games_reviews_predictions%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Predicting%20Board%20Games%20Reviews%2c%20Custers%2c%20Correlations%20and%20choosing%20an%20Error.%20&amp;url=https%3a%2f%2fcoderhook-ml.firebaseapp.com%2fproject%2fboard_games_reviews_predictions%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fcoderhook-ml.firebaseapp.com%2fproject%2fboard_games_reviews_predictions%2f&amp;title=Predicting%20Board%20Games%20Reviews%2c%20Custers%2c%20Correlations%20and%20choosing%20an%20Error.%20"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fcoderhook-ml.firebaseapp.com%2fproject%2fboard_games_reviews_predictions%2f&amp;title=Predicting%20Board%20Games%20Reviews%2c%20Custers%2c%20Correlations%20and%20choosing%20an%20Error.%20"
         target="_blank">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Predicting%20Board%20Games%20Reviews%2c%20Custers%2c%20Correlations%20and%20choosing%20an%20Error.%20&amp;body=https%3a%2f%2fcoderhook-ml.firebaseapp.com%2fproject%2fboard_games_reviews_predictions%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


      </span>
    </div>

    

    <div class="article-style" itemprop="articleBody">
      

<h1 id="predicting-board-games-reviews">Predicting Board Games Reviews</h1>

<h3 id="in-this-project-we-are-going-to-first-see-how-to-pick-a-metric-error-for-our-model-we-are-going-to-work-with-clusters-and-check-for-correlations-and-finally-we-will-create-a-model-for-our-predictions">In this project we are going to first, see how to pick a metric error for our model, we are going to work with clusters and check for correlations, and finally we will create a model for our predictions.</h3>

<pre><code class="language-python">import pandas as pd
import csv

board_games = pd.read_csv(&quot;board_games.csv&quot;)
board_games.head()
</code></pre>

<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>type</th>
      <th>name</th>
      <th>yearpublished</th>
      <th>minplayers</th>
      <th>maxplayers</th>
      <th>playingtime</th>
      <th>minplaytime</th>
      <th>maxplaytime</th>
      <th>minage</th>
      <th>users_rated</th>
      <th>average_rating</th>
      <th>bayes_average_rating</th>
      <th>total_owners</th>
      <th>total_traders</th>
      <th>total_wanters</th>
      <th>total_wishers</th>
      <th>total_comments</th>
      <th>total_weights</th>
      <th>average_weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>12333</td>
      <td>boardgame</td>
      <td>Twilight Struggle</td>
      <td>2005.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>180.0</td>
      <td>180.0</td>
      <td>180.0</td>
      <td>13.0</td>
      <td>20113</td>
      <td>8.33774</td>
      <td>8.22186</td>
      <td>26647</td>
      <td>372</td>
      <td>1219</td>
      <td>5865</td>
      <td>5347</td>
      <td>2562</td>
      <td>3.4785</td>
    </tr>
    <tr>
      <th>1</th>
      <td>120677</td>
      <td>boardgame</td>
      <td>Terra Mystica</td>
      <td>2012.0</td>
      <td>2.0</td>
      <td>5.0</td>
      <td>150.0</td>
      <td>60.0</td>
      <td>150.0</td>
      <td>12.0</td>
      <td>14383</td>
      <td>8.28798</td>
      <td>8.14232</td>
      <td>16519</td>
      <td>132</td>
      <td>1586</td>
      <td>6277</td>
      <td>2526</td>
      <td>1423</td>
      <td>3.8939</td>
    </tr>
    <tr>
      <th>2</th>
      <td>102794</td>
      <td>boardgame</td>
      <td>Caverna: The Cave Farmers</td>
      <td>2013.0</td>
      <td>1.0</td>
      <td>7.0</td>
      <td>210.0</td>
      <td>30.0</td>
      <td>210.0</td>
      <td>12.0</td>
      <td>9262</td>
      <td>8.28994</td>
      <td>8.06886</td>
      <td>12230</td>
      <td>99</td>
      <td>1476</td>
      <td>5600</td>
      <td>1700</td>
      <td>777</td>
      <td>3.7761</td>
    </tr>
    <tr>
      <th>3</th>
      <td>25613</td>
      <td>boardgame</td>
      <td>Through the Ages: A Story of Civilization</td>
      <td>2006.0</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>240.0</td>
      <td>240.0</td>
      <td>240.0</td>
      <td>12.0</td>
      <td>13294</td>
      <td>8.20407</td>
      <td>8.05804</td>
      <td>14343</td>
      <td>362</td>
      <td>1084</td>
      <td>5075</td>
      <td>3378</td>
      <td>1642</td>
      <td>4.1590</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3076</td>
      <td>boardgame</td>
      <td>Puerto Rico</td>
      <td>2002.0</td>
      <td>2.0</td>
      <td>5.0</td>
      <td>150.0</td>
      <td>90.0</td>
      <td>150.0</td>
      <td>12.0</td>
      <td>39883</td>
      <td>8.14261</td>
      <td>8.04524</td>
      <td>44362</td>
      <td>795</td>
      <td>861</td>
      <td>5414</td>
      <td>9173</td>
      <td>5213</td>
      <td>3.2943</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="language-python">board_games.shape
</code></pre>

<pre><code>(81312, 20)
</code></pre>

<pre><code class="language-python">board_games = board_games.dropna(axis=0)
</code></pre>

<pre><code class="language-python">board_games.shape
</code></pre>

<pre><code>(81268, 20)
</code></pre>

<pre><code class="language-python">board_games = board_games[board_games['users_rated'] &gt; 0]
</code></pre>

<pre><code class="language-python">board_games.shape
</code></pre>

<pre><code>(56894, 20)
</code></pre>

<p># Picking An Error Metric</p>

<pre><code class="language-python">import matplotlib.pyplot as plt
%matplotlib inline

plt.hist(board_games['average_rating'])
plt.show()
</code></pre>

<p><img src="/img/ds/board_review/output_8_0.png" alt="png" /></p>

<pre><code class="language-python">plt.boxplot(board_games['average_rating'])
plt.show()
</code></pre>

<p><img src="/img/ds/board_review/output_9_0.png" alt="png" /></p>

<pre><code class="language-python">print(board_games['average_rating'].std())
print(board_games['average_rating'].mean())
</code></pre>

<pre><code>1.57882993483
6.01611284933
</code></pre>

<ul>
<li><p>AS the data is continous using mean square error makes sense.</p></li>

<li><p>But it is not the only possibility, as it is a linear regression and we want to meassure the distance between the actual value and the predicted one, we can also use, mean square and mean median errors.</p></li>

<li><p>DEFINETLY NOT to use AUC or any other classification error metric cause this is not the case we are going to work in.</p></li>
</ul>

<h1 id="plotting-clusters">Plotting Clusters</h1>

<pre><code class="language-python">from sklearn.cluster import KMeans
import numpy as np

kmeans = KMeans(n_clusters = 5)

numeric_columns = board_games.iloc[:, 3:]
numeric_columns.head()
</code></pre>

<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>yearpublished</th>
      <th>minplayers</th>
      <th>maxplayers</th>
      <th>playingtime</th>
      <th>minplaytime</th>
      <th>maxplaytime</th>
      <th>minage</th>
      <th>users_rated</th>
      <th>average_rating</th>
      <th>bayes_average_rating</th>
      <th>total_owners</th>
      <th>total_traders</th>
      <th>total_wanters</th>
      <th>total_wishers</th>
      <th>total_comments</th>
      <th>total_weights</th>
      <th>average_weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2005.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>180.0</td>
      <td>180.0</td>
      <td>180.0</td>
      <td>13.0</td>
      <td>20113</td>
      <td>8.33774</td>
      <td>8.22186</td>
      <td>26647</td>
      <td>372</td>
      <td>1219</td>
      <td>5865</td>
      <td>5347</td>
      <td>2562</td>
      <td>3.4785</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2012.0</td>
      <td>2.0</td>
      <td>5.0</td>
      <td>150.0</td>
      <td>60.0</td>
      <td>150.0</td>
      <td>12.0</td>
      <td>14383</td>
      <td>8.28798</td>
      <td>8.14232</td>
      <td>16519</td>
      <td>132</td>
      <td>1586</td>
      <td>6277</td>
      <td>2526</td>
      <td>1423</td>
      <td>3.8939</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2013.0</td>
      <td>1.0</td>
      <td>7.0</td>
      <td>210.0</td>
      <td>30.0</td>
      <td>210.0</td>
      <td>12.0</td>
      <td>9262</td>
      <td>8.28994</td>
      <td>8.06886</td>
      <td>12230</td>
      <td>99</td>
      <td>1476</td>
      <td>5600</td>
      <td>1700</td>
      <td>777</td>
      <td>3.7761</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2006.0</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>240.0</td>
      <td>240.0</td>
      <td>240.0</td>
      <td>12.0</td>
      <td>13294</td>
      <td>8.20407</td>
      <td>8.05804</td>
      <td>14343</td>
      <td>362</td>
      <td>1084</td>
      <td>5075</td>
      <td>3378</td>
      <td>1642</td>
      <td>4.1590</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2002.0</td>
      <td>2.0</td>
      <td>5.0</td>
      <td>150.0</td>
      <td>90.0</td>
      <td>150.0</td>
      <td>12.0</td>
      <td>39883</td>
      <td>8.14261</td>
      <td>8.04524</td>
      <td>44362</td>
      <td>795</td>
      <td>861</td>
      <td>5414</td>
      <td>9173</td>
      <td>5213</td>
      <td>3.2943</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="language-python">kmeans.fit(numeric_columns)
</code></pre>

<pre><code>KMeans(copy_x=True, init='k-means++', max_iter=300, n_clusters=5, n_init=10,
    n_jobs=1, precompute_distances='auto', random_state=None, tol=0.0001,
    verbose=0)
</code></pre>

<pre><code class="language-python">labels = kmeans.labels_
print(labels)
</code></pre>

<pre><code>[1 1 1 ..., 0 0 0]
</code></pre>

<pre><code class="language-python">game_mean = numeric_columns.apply(np.mean, axis = 1)
game_mean.head()
</code></pre>

<pre><code>0    3806.296359
1    2662.195541
2    1979.243229
3    2467.201242
4    6360.675421
dtype: float64
</code></pre>

<pre><code class="language-python">game_std = numeric_columns.apply(np.std, axis = 1)

plt.scatter(x=game_mean, y=game_std, c=game_std)
plt.show()
</code></pre>

<p><img src="/img/ds/board_review/output_17_0.png" alt="png" /></p>

<h3 id="results">Results:</h3>

<pre><code>- We can see that there are few games that are played by a lot of players. Most games dont get played that much but a few get plaed by a lot of players.
</code></pre>

<h1 id="finding-correlations">Finding Correlations</h1>

<pre><code class="language-python">correlations = numeric_columns.corr()

correlations['average_rating']
</code></pre>

<pre><code>yearpublished           0.108461
minplayers             -0.032701
maxplayers             -0.008335
playingtime             0.048994
minplaytime             0.043985
maxplaytime             0.048994
minage                  0.210049
users_rated             0.112564
average_rating          1.000000
bayes_average_rating    0.231563
total_owners            0.137478
total_traders           0.119452
total_wanters           0.196566
total_wishers           0.171375
total_comments          0.123714
total_weights           0.109691
average_weight          0.351081
Name: average_rating, dtype: float64
</code></pre>

<ul>
<li>We can see that average_weight is highly correlated with average_rating, also, yearspublished has a good correlation which indicates that new games get better ratings. Another example is minage, as it is bigger has more rating.</li>
</ul>

<pre><code class="language-python">cols_dont_corr = list(numeric_columns.columns)
cols_dont_corr.remove('bayes_average_rating')
cols_dont_corr.remove('average_rating')
# This columns are eliminated because seems that they do not correlate with average_rating

corr_cols = cols_dont_corr

</code></pre>

<h1 id="creating-a-model">Creating A Model</h1>

<ul>
<li>Lets create a linear regression model and make some predictions about the  data.</li>
</ul>

<pre><code class="language-python">from sklearn.linear_model import LinearRegression

lr = LinearRegression()
lr.fit(board_games[corr_cols], board_games['average_rating'])
predictions = lr.predict(board_games[corr_cols])

mse = np.mean((predictions - board_games['average_rating']) ** 2)
</code></pre>

<pre><code class="language-python">print(mse)
</code></pre>

<pre><code>2.09339697583
</code></pre>

<ul>
<li>Our ERROR here is very close to the standard deviation, which means that our model does not predict well.</li>
</ul>

    </div>

  </div>
</article>

<div class="container">
  <nav>
  <ul class="pager">
    
    <li class="previous"><a href="https://coderhook-ml.firebaseapp.com/project/project_prep_sql/"><span
      aria-hidden="true">&larr;</span> Preparing the data to use it in a mySQL database.</a></li>
    

    
    <li class="next"><a href="https://coderhook-ml.firebaseapp.com/project/proj_sql_relations/">Creating Relations in SQL database and Python. <span
      aria-hidden="true">&rarr;</span></a></li>
    
  </ul>
</nav>

</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 coderHook &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha512-jGsMH83oKe9asCpkOVkBnUrDDTp8wl+adkB2D+//JtlxO4SrLoJdhbOysIFQJloQFD+C4Fl1rMsQZF76JjV0eQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.2/imagesloaded.pkgd.min.js" integrity="sha512-iHzEu7GbSc705hE2skyH6/AlTpOfBmkx7nUqTLGzPYR+C1tRaItbRlJ7hT/D3YQ9SV0fqLKzp4XY9wKulTBGTw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/TweenMax.min.js" integrity="sha512-Z5heTz36xTemt1TbtbfXtTq5lMfYnOkXM2/eWcTTiLU01+Sw4ku1i7vScDc8fWhrP2abz9GQzgKH5NGBLoYlAw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/plugins/ScrollToPlugin.min.js" integrity="sha512-CDeU7pRtkPX6XJtF/gcFWlEwyaX7mcAp5sO3VIu/ylsdR74wEw4wmBpD5yYTrmMAiAboi9thyBUr1vXRPA7t0Q==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

